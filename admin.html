<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="./style.css" />
</head>

<body>
    <div class="App">
        <header class="App-header">
            <!-- په مهربانی سره لاندی کلیک وکړی!
            <br />
            &#10549;
            <button class='btn' onclick="findperson()">کتل</button> -->
            <!-- <button class='btn btn-primary' onclick="saveTest()">کتل</button> -->
            <div class="closer" style="cursor: pointer;">
                &#10060;
            </div>
            <div id="result">
            </div>
    </div>
    </header>
    </div>
</body>

</html>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js"></script>
</script>
</body>


</html>
<script type="module">
    // promp User
    var userValue = prompt("Type Your Password");
    // END promp User
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getFirestore, addDoc, setDoc, doc, collection, query, where, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBzU2T7WcCiETXLz1wSBEqtP8DSuutpEgs",
        authDomain: "locationsystem-b3d81.firebaseapp.com",
        projectId: "locationsystem-b3d81",
        storageBucket: "locationsystem-b3d81.appspot.com",
        messagingSenderId: "625254395363",
        appId: "1:625254395363:web:07d3702515e494e32f84d6"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // Initialize Cloud Firestore and get a reference to the service
    const db = getFirestore(app);
    // ---------------------read Data from Firebase
    const q = query(collection(db, "users"), where("Name", "==", 'founded'));

    // ------ Auth Check
    if (userValue === 'omar') {
        const querySnapshot = await getDocs(q);
        querySnapshot.forEach(element => {
            const allData = element.data().Age
            const div = document.createElement('div');
            div.classList.add('list');
            div.appendChild(document.createTextNode(allData));
            document.querySelector('#result').appendChild(div)
        });
    } else {
        window.location.reload()
    }
    // ------ END Auth Check
    // -------------- Delete All 
    var deleteBtn = document.querySelector('.closer');
    deleteBtn.addEventListener('click', function () {
        const deleteStatic = document.querySelector('#result');
        deleteStatic.remove();
        // ---------------------Deleting From Firebase Database
        await deleteDoc(doc(db, "users", "founded"));
        // db.collection("users").doc("founded").delete().then(() => {
        //     console.log("Document successfully deleted!");
        // }).catch((error) => {
        //     console.error("Error removing document: ", error);
        // });
        // ---------------------END Deleting From Firebase Database

        // alert('I am Buton Closeer')
        // // deleteDoc(doc(db, "users", where("Name", "==", 'founded')));
        // const cityRef = doc(db, 'users', 'TZFl24Q963LX3z952tjZ');

        // // Remove the 'capital' field from the document
        // updateDoc(cityRef, {
        //     Name: ''
        // });
    });
    // --------------END Delete All

// ---------------------END read Data from Firebase
</script>